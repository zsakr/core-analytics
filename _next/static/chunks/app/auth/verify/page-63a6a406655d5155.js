(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3067],{2085:(e,r,t)=>{"use strict";t.d(r,{F:()=>n});var a=t(2596);let i=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=a.$,n=(e,r)=>t=>{var a;if((null==r?void 0:r.variants)==null)return s(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:n,defaultVariants:l}=r,o=Object.keys(n).map(e=>{let r=null==t?void 0:t[e],a=null==l?void 0:l[e];if(null===r)return null;let s=i(r)||i(a);return n[e][s]}),c=t&&Object.entries(t).reduce((e,r)=>{let[t,a]=r;return void 0===a||(e[t]=a),e},{});return s(e,o,null==r?void 0:null===(a=r.compoundVariants)||void 0===a?void 0:a.reduce((e,r)=>{let{class:t,className:a,...i}=r;return Object.entries(i).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...l,...c}[r]):({...l,...c})[r]===t})?[...e,t,a]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},3999:(e,r,t)=>{"use strict";t.d(r,{cn:()=>s});var a=t(2596),i=t(9688);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,i.QP)((0,a.$)(r))}},5112:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var a=t(5155),i=t(2115),s=t(5695),n=t(6203),l=t(8915),o=t(7168);function c(){let e=(0,s.useRouter)(),r=(0,s.useSearchParams)(),[t,c]=(0,i.useState)("initial"),[d,u]=(0,i.useState)(""),m=async()=>{try{c("verifying");let e=null==r?void 0:r.get("email");if(!e){c("error"),u("Could not determine user email");return}console.log("[Email Verification] Starting verification for:",e);let t=await fetch("/api/debug-fix-auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,action:"verify-email",force:!0})});console.log("[Email Verification] Debug-fix-auth response received");let a=await t.json();if(a.error)throw Error(a.error);a.customToken&&await (0,n.p)(l.j2,a.customToken),c("success")}catch(e){console.error("Error verifying email:",e),c("error"),u(e.message)}};return(0,a.jsx)("div",{className:"container mx-auto py-8",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto bg-card p-8 rounded-lg shadow-lg",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Email Verification"}),"initial"===t&&(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("p",{className:"text-lg mb-4",children:"Your email verification link has been received."}),(0,a.jsx)(o.$,{onClick:m,size:"lg",className:"w-full py-6 text-lg",children:"Click to Complete Verification"})]}),"verifying"===t&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin h-8 w-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{children:"Verifying your email..."})]}),"success"===t&&(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-green-500 text-xl mb-4",children:"âœ“ Email verified successfully!"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"You can now sign in to your account."}),(0,a.jsx)(o.$,{onClick:()=>e.push("/auth/sign-in"),size:"lg",className:"w-full py-6 text-lg",children:"Go to Sign In"})]}),"error"===t&&(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsxs)("div",{className:"text-red-500 mb-4",children:["Error: ",d]}),(0,a.jsx)(o.$,{onClick:()=>e.push("/auth/sign-in"),size:"lg",className:"w-full py-6 text-lg",children:"Go to Sign In"})]})]})})}function d(){return(0,a.jsx)(i.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(c,{})})}},5695:(e,r,t)=>{"use strict";var a=t(8999);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},6493:(e,r,t)=>{Promise.resolve().then(t.bind(t,5112))},7168:(e,r,t)=>{"use strict";t.d(r,{$:()=>c});var a=t(5155),i=t(2115),s=t(9708),n=t(2085),l=t(3999);let o=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-white dark:bg-white dark:text-black hover:bg-primary/90 dark:hover:bg-white/90",destructive:"bg-destructive text-white hover:bg-destructive/90 dark:bg-red-600",outline:"border border-primary text-primary dark:border-white dark:text-white bg-transparent hover:bg-primary/10 dark:hover:bg-white/10",secondary:"bg-white text-primary dark:bg-black dark:text-white hover:bg-white/90 dark:hover:bg-black/90",ghost:"text-primary dark:text-white hover:bg-primary/10 dark:hover:bg-white/10",link:"text-primary dark:text-white underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",xl:"h-14 rounded-md px-10",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,r)=>{let{className:t,variant:i,size:n,asChild:c=!1,...d}=e,u=c?s.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:i,size:n,className:t})),ref:r,...d})});c.displayName="Button"},8915:(e,r,t)=>{"use strict";t.d(r,{$A:()=>d,db:()=>o,j2:()=>l});var a=t(3915),i=t(6203),s=t(5317);let n=0===(0,a.Dk)().length?(0,a.Wp)({apiKey:"AIzaSyCBUHBbrckrtj5zdd2asnCuCVMaq1a8m-c",authDomain:"core-analytics-ai-ff40e.firebaseapp.com",projectId:"core-analytics-ai-ff40e",storageBucket:"core-analytics-ai-ff40e.firebasestorage.app",messagingSenderId:"487617706713",appId:"1:487617706713:web:2e7a41a8723452b139cc8",measurementId:"G-5XDQL0L5C8"}):(0,a.Dk)()[0],l=(0,i.xI)(n),o=(0,s.aU)(n),c=new i.HF;c.addScope("profile"),c.addScope("email"),c.setCustomParameters({prompt:"select_account"}),l.useDeviceLanguage(),l.setPersistence(i.F0);let d={url:"".concat("http://localhost:3000","/auth/verify-email"),handleCodeInApp:!0}}},e=>{var r=r=>e(e.s=r);e.O(0,[2992,6122,4277,5672,8441,1684,7358],()=>r(6493)),_N_E=e.O()}]);