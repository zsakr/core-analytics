(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3698],{704:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(5155),r=s(2115),n=s(5695),l=s(8915),d=s(5317),i=s(4964),c=s(8524),o=s(8482);function u(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async()=>{try{let e=(0,d.rJ)(l.db,"users"),s=(await (0,d.GG)(e)).docs.map(e=>{var t;return{id:e.id,...e.data(),createdAt:(null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate().toLocaleString())||"N/A"}});t(s)}catch(e){console.error("Error fetching users:",e)}finally{n(!1)}})()},[]),s)?(0,a.jsx)("div",{children:"Loading users..."}):(0,a.jsxs)(o.Zp,{className:"p-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-semibold mb-4",children:["Users (",e.length,")"]}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(c.XI,{children:[(0,a.jsx)(c.A0,{children:(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nd,{children:"Email"}),(0,a.jsx)(c.nd,{children:"Name"}),(0,a.jsx)(c.nd,{children:"Location"}),(0,a.jsx)(c.nd,{children:"Age Category"}),(0,a.jsx)(c.nd,{children:"Plan"}),(0,a.jsx)(c.nd,{children:"Billing"}),(0,a.jsx)(c.nd,{children:"Status"}),(0,a.jsx)(c.nd,{children:"Created At"})]})}),(0,a.jsx)(c.BF,{children:e.map(e=>(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nA,{children:e.email}),(0,a.jsxs)(c.nA,{children:[e.firstName," ",e.lastName]}),(0,a.jsxs)(c.nA,{children:[e.city,", ",e.country]}),(0,a.jsx)(c.nA,{children:e.ageCategory}),(0,a.jsx)(c.nA,{children:e.selectedPlan}),(0,a.jsx)(c.nA,{children:e.billingCycle}),(0,a.jsx)(c.nA,{children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"active"===e.subscriptionStatus?"text-green-600":"text-red-600",children:e.subscriptionStatus}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e.paymentStatus})]})}),(0,a.jsx)(c.nA,{children:e.createdAt})]},e.id))})]})})]})}function m(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!0),[i,u]=(0,r.useState)(0);return((0,r.useEffect)(()=>{let e;return(()=>{try{e=(0,d.aQ)((0,d.rJ)(l.db,"users"),e=>{let s=e.docs.map(e=>{let t=e.data();return{id:e.id,amount:t.price||0,currency:"usd",email:t.email||"N/A",status:t.subscriptionStatus||"N/A",createdAt:t.createdAt?new Date(1e3*t.createdAt.seconds).toLocaleString():"N/A",nextBillingDate:t.nextBillingDate||void 0,billingCycle:t.billingCycle||"N/A",planId:t.planId||"N/A",selectedPlan:t.selectedPlan||"N/A",paymentStatus:t.paymentStatus||"N/A",subscriptionStatus:t.subscriptionStatus||"N/A"}});t(s);let a=s.reduce((e,t)=>e+t.amount,0);u(a),n(!1)},e=>{console.error("Error fetching transactions:",e),n(!1)})}catch(e){console.error("Error setting up transaction listener:",e),n(!1)}})(),()=>{e&&e()}},[]),s)?(0,a.jsx)("div",{children:"Loading transactions..."}):(e.filter(e=>"succeeded"===e.status).reduce((e,t)=>e+parseFloat(t.amount.toString()),0),(0,a.jsx)(o.Zp,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold",children:["Transactions (",e.length,")"]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Revenue"}),(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",i.toFixed(2)]})]})]}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(c.XI,{children:[(0,a.jsx)(c.A0,{children:(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nd,{children:"Email"}),(0,a.jsx)(c.nd,{children:"Amount"}),(0,a.jsx)(c.nd,{children:"Plan"}),(0,a.jsx)(c.nd,{children:"Billing Cycle"}),(0,a.jsx)(c.nd,{children:"Status"}),(0,a.jsx)(c.nd,{children:"Payment Date"}),(0,a.jsx)(c.nd,{children:"Next Billing"})]})}),(0,a.jsx)(c.BF,{children:e.map((e,t)=>(0,a.jsxs)(c.Hj,{children:[(0,a.jsx)(c.nA,{children:e.email}),(0,a.jsxs)(c.nA,{children:["$",e.amount.toFixed(2)]}),(0,a.jsx)(c.nA,{children:e.selectedPlan}),(0,a.jsx)(c.nA,{children:e.billingCycle}),(0,a.jsx)(c.nA,{children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"succeeded"===e.status?"text-green-600":"text-red-600",children:e.status}),e.paymentStatus&&(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e.paymentStatus})]})}),(0,a.jsx)(c.nA,{children:e.createdAt}),(0,a.jsx)(c.nA,{children:e.nextBillingDate})]},t))})]})})]})}))}function x(){let e=(0,n.useRouter)(),[t,s]=(0,r.useState)(!1),[c,o]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async()=>{let t=l.j2.currentUser;if(!t||!(await (0,d.x7)((0,d.H9)(l.db,"admins",t.uid))).exists()){e.push("/");return}s(!0),o(!1)})()},[e]),c)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Loading..."}):t?(0,a.jsxs)("div",{className:"container mx-auto py-10",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Admin Dashboard"}),(0,a.jsxs)(i.tU,{defaultValue:"users",children:[(0,a.jsxs)(i.j7,{children:[(0,a.jsx)(i.Xi,{value:"users",children:"Users"}),(0,a.jsx)(i.Xi,{value:"transactions",children:"Transactions"})]}),(0,a.jsx)(i.av,{value:"users",children:(0,a.jsx)(u,{})}),(0,a.jsx)(i.av,{value:"transactions",children:(0,a.jsx)(m,{})})]})]}):null}},3999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var a=s(2596),r=s(9688);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},4964:(e,t,s)=>{"use strict";s.d(t,{Xi:()=>c,av:()=>o,j7:()=>i,tU:()=>d});var a=s(5155),r=s(2115),n=s(64),l=s(3999);let d=n.bL,i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.B8,{ref:t,className:(0,l.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});i.displayName=n.B8.displayName;let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.l9,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});c.displayName=n.l9.displayName;let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(n.UC,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});o.displayName=n.UC.displayName},5056:(e,t,s)=>{Promise.resolve().then(s.bind(s,704))},8482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>i,Zp:()=>l,aR:()=>d,wL:()=>u});var a=s(5155),r=s(2115),n=s(3999);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});l.displayName="Card";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...r})});d.displayName="CardHeader";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});i.displayName="CardTitle";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...r})});c.displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...r})});o.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},8524:(e,t,s)=>{"use strict";s.d(t,{A0:()=>d,BF:()=>i,Hj:()=>c,XI:()=>l,nA:()=>u,nd:()=>o});var a=s(5155),r=s(2115),n=s(3999);let l=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",s),...r})})});l.displayName="Table";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",s),...r})});d.displayName="TableHeader";let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",s),...r})});i.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});c.displayName="TableRow";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});o.displayName="TableHead";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});u.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption"},8915:(e,t,s)=>{"use strict";s.d(t,{$A:()=>o,db:()=>i,j2:()=>d});var a=s(3915),r=s(6203),n=s(5317);let l=0===(0,a.Dk)().length?(0,a.Wp)({apiKey:"AIzaSyCBUHBbrckrtj5zdd2asnCuCVMaq1a8m-c",authDomain:"core-analytics-ai-ff40e.firebaseapp.com",projectId:"core-analytics-ai-ff40e",storageBucket:"core-analytics-ai-ff40e.firebasestorage.app",messagingSenderId:"487617706713",appId:"1:487617706713:web:2e7a41a8723452b139cc8",measurementId:"G-5XDQL0L5C8"}):(0,a.Dk)()[0],d=(0,r.xI)(l),i=(0,n.aU)(l),c=new r.HF;c.addScope("profile"),c.addScope("email"),c.setCustomParameters({prompt:"select_account"}),d.useDeviceLanguage(),d.setPersistence(r.F0);let o={url:"".concat("http://localhost:3000","/auth/verify-email"),handleCodeInApp:!0}}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,6122,4277,5672,6748,64,8441,1684,7358],()=>t(5056)),_N_E=e.O()}]);